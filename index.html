<!DOCTYPE html>
<html>
  <head>
    <title>Speech Synthesis API</title>
    <script>
      function speak() {
        const urlParams = new URLSearchParams(window.location.search);
        const text = urlParams.get('text');
        if (text) {
        var msg = new SpeechSynthesisUtterance('Hello world');
const constraints = { audio: true };
const chunks = [];

navigator.mediaDevices.getUserMedia(constraints)
  .then(function(stream) {
    const mediaRecorder = new MediaRecorder(stream);

    mediaRecorder.ondataavailable = function(event) {
      chunks.push(event.data);
    }

    mediaRecorder.onstop = function(event) {
      const blob = new Blob(chunks, { 'type' : 'audio/ogg; codecs=opus' });
      // Do something with the audio blob, like send it to the server or play it back on the page
    }

    mediaRecorder.start();
  })
  .catch(function(err) {
    console.log('The following error occurred: ' + err);
  });
        }
      }
    </script>
  </head>
  <body onload="speak()">
    <p>Speaking: <span id="text"></span></p>
  </body>
</html>
