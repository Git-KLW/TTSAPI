<!DOCTYPE html>
<html>
  <head>
    <title>Speech Synthesis API</title>
    <script>
      function speak() {
        const urlParams = new URLSearchParams(window.location.search);
        const text = urlParams.get('text');
        if (text) {
          const msg = new SpeechSynthesisUtterance();
          msg.text = text;
          window.speechSynthesis.speak(msg);
          msg.onend = function(event) {
            const blob = new Blob([new Uint8Array(URL.createObjectURL(event.target.getBlob()).split(',')[1])], {type: 'audio/mpeg'});
            const reader = new FileReader();
            reader.readAsDataURL(blob);
            reader.onloadend = function() {
              const dataURL = reader.result;
              window.location.href = 'data:audio/mpeg;base64,' + dataURL.split(',')[1];
            }
          }
        }
      }
    </script>
  </head>
  <body onload="speak()">
    <p>Generating TTS audio...</p>
  </body>
</html>
